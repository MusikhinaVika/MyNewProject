

print('Вы проснулись в неизвестном доме!')
print('Вы встали с кровати и совсем ничего не помните.')
print('Перед вами 2 двери.')
print('Выберите, что будете делать:')
print('1 - Останьтесь и продолжите лежать на кровати.')
print('2 - Пойдете к правой двери.')
print('3 - Пойдете к левой двери.')

actions = {
    '1': 'Поздравляю! К вам пришел маньяк и убил вас! GAME OVER',
    '2': 'Вы подошли к правой двери, когда вошли в нее, поняли что это гостиная.',
    '3': 'Вы подошли к левой двери, она оказалась завалена непонятными вещами.'
}

items = {
    'лом': {'question': '4 * 12 =', 'answer': '48', 'success': 'Вы смогли выломать дверь и попали в прихожую.'},
    'огнетушитель': {'question': '5 * 8 =', 'answer': '40', 'success': 'Вы пытались сломать дверь огнетушителем, это услышал маньяк.'}
}

while True:
    choice = input()
    if choice in actions:
        print(actions[choice])
        
        if choice == '2':
            print('Вы заметили еще одну дверь, попытались открыть, но она была заперта.')
            print('Вы начали искать предметы, с помощью которых смогли бы сломать дверь.')
            print('Перед вами оказался лом(1) и огнетушитель(2). Выберите, что хотите взять:')
            
            while True:
                item_choice = input()
                if item_choice == '1':
                    print('Вы выбрали лом, чтобы его взять, вам нужно решить пример.')
                    print(items['лом']['question'])
                    
                    while True:
                        answer = input()
                        if answer == items['лом']['answer']:
                            print('Правильно! ' + items['лом']['success'])
                            print('Вы увидели дверь на улицу, ваши дальнейшие действия?')
                            print('1 - Убежать')
                            print('2 - Остаться')
 while True:
                                escape_choice = input()
                                if escape_choice == '1':
                                    print('Поздравляю! Вам удалось сбежать!')
                                    print('Вы смогли попасть в пункт полиции и узнали, что это дом серийного убийцы.')
                                    break
                                elif escape_choice == '2':
                                    print('Вы зачем-то остались, вас увидел маньяк и убил! GAME OVER')
                                    break else:
                                    print('Выберите еще раз!')
                                    print('1 - Убежать')
                                    print('2 - Остаться')
                            break
                        else:
                            print('Неправильно! Решите еще раз!')
                elif item_choice == '2':
                    print('Вы выбрали огнетушитель. Чтобы его взять, вам нужно решить пример:')
                    print(items['огнетушитель']['question'])
                    
                    while True:
                        answer = input()
                        if answer == items['огнетушитель']['answer']:
                            print('Правильно! ' + items['огнетушитель']['success'])
                            print('Это услышал маньяк.')
                            break
                        else:
                            print('Неправильно! Попробуйте еще раз!')
                else:
                    print('Попробуйте еще раз: лом(1) или огнетушитель(2).')
        
        elif choice == '3':
            print('Чтобы убрать вещи, решите пример:')
            print('6 * 11 =')
 while True:
                answer = input()
                if answer == '66':
                    print('Правильно! Вам удалось убрать вещи и открыть дверь, и вы попали на кухню.')
                    print('Перед вами оказалось окно, вы сразу же его разбили, но не смогли выбраться, так как был высокий этаж.')
                    print('Вы начали кричать и звать на помощь.')
                    print('О нет, вас услышал маньяк, у вас под ногами было много осколков.')
                    print('К вам прибежал маньяк. Ваши действия?')
                    print('1 - Начать защищаться')
                    print('2 - Прыгнуть из окна')
 while True:
                        defense_choice = input()
                        if defense_choice == '1':
                            print('Вы быстро сориентировались и смогли его ранить осколками.')
                            print('Молодцы! Вы выиграли себе немного времени.')
                            print('Ваши дальнейшие действия?')
                            print('1 - Осмотреть другие комнаты')
                            print('2 - Звать на помощь в окно дальше')
                            
                            while True:
                                room_choice = input()
                                if room_choice == '1':
                                    print('Вы начали осматривать другие комнаты.')
                                    print('Вам удалось найти телефон и вы позвонили в полицию.')
                                    print('Поздравляю! Вам удалось спастись.')
                                    print('Вы выиграли!')
                                    break
                                elif room_choice == '2':
                                    print('Вы начали звать на помощь дальше.')
                                    print('О нет, оказывается, у маньяка были друзья, и они тебя услышали.')
                                    print('Вы проиграли! GAME OVER')
                                    break
                                else:
                                    print('Попробуйте снова!')
                                    print('1 - Осмотреть другие комнаты')
                                    print('2 - Звать на помощь в окно дальше')
                        elif defense_choice == '2':
                            print('Вы прыгнули с окна и повредили ноги.')
                            print('К вам спустился маньяк и добил вас.')
                            print('Вы проиграли! GAME OVER')
                            break
                        else:
                            print('Попробуйте еще раз!')
                            print('1 - Начать защищаться')
                            print('2 - Прыгнуть из окна')
                else:
                    print('Неправильно! Попробуйте еще раз.')
    else:
        print('Попробуйте снова!')
        print('1 - Останьтесь и продолжите лежать на кровати.')
        print('2 - Пойдете к правой двери.')
        print('3 - Пойдете к левой двери.')
